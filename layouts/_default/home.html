{{ define "main" }}

{{ .Content }}

{{/* Intro summary section */}}

{{ if or .Site.Params.homeIntroTitle .Site.Params.homeIntroContent }}
<div class="intro">
    {{ with .Site.Params.homeIntroTitle }}
    <h1>{{ . }}</h1>
    {{ end }}

    {{ with .Site.Params.homeIntroContent }}
    <p>{{ . | markdownify }}</p>
    {{ end }}
</div>
{{ end }}

{{/* Social Icons */}}

{{ with site.Params.social }}
<div class="social-icons">
    {{- range . }}
    <a href="{{ trim .url " " | safeURL }}" target="_blank"
        rel="noopener noreferrer me"
        title="{{ (.title | default .name) | title }}">
        {{ partial "svg.html" . }}
    </a>
    {{- end }}
</div>
{{ end }}

{{/* Collection Section - 연도별 그룹핑으로 변경 */}}

{{ if .Site.Params.homeCollection }}

<div class="list-container">
    {{ with .Site.Params.homeCollectionTitle}}
    <h1> {{ . }} </h1>
    {{ end }}

    {{ $pages := where .Site.RegularPages "Section" .Site.Params.homeCollection }}
    {{ $sortedPages := $pages.ByWeight.ByDate.Reverse }}
    {{ $groups := $sortedPages.GroupByDate "2006" }}

    {{/* 연도별로 표시 */}}
    {{ range $groups }}
        <h3 style="color: #1e40af; font-weight: 600;">{{ .Key }}</h3>
        <ul>
            {{ range .Pages }}
                <li>
                    <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                    <span class="date"> - {{ .Date.Format "Jan 2" }}</span>
                </li>
            {{ end }}
        </ul>
    {{ end }}

</div>

{{ end }}

{{ end }}